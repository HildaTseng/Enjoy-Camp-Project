import{m as v,d as w}from"./_commonjsHelpers-0aca6d4e.js";import{S as _,c as f}from"./cart-18f8dfb4.js";import{v as x,a as y}from"./runtime-dom.esm-bundler-0d16a18e.js";import{_ as k,r as V,o as l,W as c,X as t,a0 as d,a5 as r,a6 as u,a3 as n,a4 as b,c as I,Z as g,Y as E,a1 as C,a2 as h}from"./_plugin-vue_export-helper-a32a19e0.js";const{VITE_URL:$,VITE_PATH:S}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"hilda88",BASE_URL:"/Enjoy-Camp-Project/",MODE:"production",DEV:!1,PROD:!0},B={data(){return{code:""}},computed:{...v(f,["carts","total","final_total","loadingItem"])},methods:{...w(f,["getCart","updateCart","deleteCartItem"]),toCurrency(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getCoupon(){const e={code:this.code};this.$http.post(`${$}/v2/api/${S}/coupon`,{data:e}).then(a=>{_.fire({icon:"success",title:a.data.message,showConfirmButton:!1,timer:1500}),this.getCart()}).catch(a=>{_.fire({icon:"error",title:a.response.data.message,showConfirmButton:!1,timer:1500})})}},mounted(){this.getCart(),_.fire({title:"開幕慶優惠好禮",text:"優惠券輸入 【 NEW80 】即可獲得8折券"})}},T={class:"container my-md-10"},U={class:"row justify-content-center"},j={class:"col-xl-10"},N={class:"my-10 d-none d-md-block"},D=t("h2",{class:"fs-28 px-5 my-10 text-center"},"我的購物車",-1),q={class:"border border-g-40"},A=C('<ul class="row text-center fw-bold py-5 fs-19 bg-secondary m-0"><li class="col-5">品名</li><li class="col-2">數量</li><li class="col-2">單價</li><li class="col-2">小計</li><li class="col-1"></li></ul>',1),L={key:0},P={class:"col-5"},R={class:"col-2"},M=["onUpdate:modelValue","onChange","disabled"],H=["value"],O={class:"col-2 p-0"},W={class:"col-2"},z={class:"col-1"},F=["onClick","disabled"],X=t("i",{class:"fa-regular fa-trash-can fs-19"},null,-1),Y=[X],Z={key:1,class:"my-10"},G=t("p",{class:"text-center fs-7 fw-bold"},"購物車目前是空的。",-1),J=[G],K={class:"row text-end py-5 fs-19 bg-secondary align-items-center justify-content-between m-0"},Q=t("li",{class:"col-lg-7 col-8"},"優惠券",-1),tt={class:"col-4"},et={class:"input-group"},st={key:2,class:"row text-center py-4 align-items-center border-bottom m-0"},ot=t("li",{class:"col-9 text-end"},"優惠券折抵",-1),lt={class:"col-3 text-danger text-end"},nt={class:"row text-center py-4 align-items-center border-bottom m-0"},ct=t("li",{class:"col-9 text-end"},"小計",-1),it={class:"col-3 text-end"},at={class:"row text-center py-4 align-items-center border-bottom m-0"},dt=t("li",{class:"col-9 fw-bold fs-19 text-end"},"總金額",-1),rt={class:"col-3 fw-bold fs-19 text-end"},_t={class:"d-flex flex-row justify-content-end mt-5"},ut=t("button",{type:"button",class:"btn btn-primary rounded-0 px-12 py-2 position-relative hvr-icon-wobble-horizontal"},[h("結帳去 "),t("span",{class:"material-icons align-middle icon-right p-0 hvr-icon"}," trending_flat ")],-1),ht={class:"mt-5 mb-10 d-block d-md-none container"},mt=t("h2",{class:"fs-28 px-5 my-5 text-center"},"我的購物車",-1),pt=t("ul",{class:"row text-center py-5 fs-19 bg-secondary"},[t("li",{class:"col-7"},"品名"),t("li",{class:"col-3 text-end"},"單價")],-1),ft={key:0},yt={class:"col-7 p-0 text-start ps-3"},bt={class:"col-3 p-0 text-end"},gt={class:"col-2 p-0"},Ct=["onClick","disabled"],vt=t("i",{class:"fa-regular fa-trash-can fs-7"},null,-1),wt=[vt],xt={class:"col-6"},kt=["onUpdate:modelValue","onChange","disabled"],Vt=["value"],It={class:"col-6 d-flex flex-row justify-content-around"},Et={class:"fw-bold"},$t={key:1,class:"my-10"},St=t("p",{class:"text-center fs-7 fw-bold"},"購物車目前是空的。",-1),Bt=[St],Tt=C('<ul class="row text-center py-5 fs-19 bg-secondary align-items-center"><li class="col-3">優惠券</li><li class="col-9"><div class="input-group"><input type="text" class="form-control rounded-0" placeholder="請輸入優惠代碼"><button type="button" class="input-group-text rounded-0">套用</button></div></li></ul><ul class="row text-center py-4 gy-4 align-items-center border-bottom"><li class="col-7 text-end">優惠券折抵</li><li class="col-5 text-danger text-end">-$500</li></ul>',2),Ut={class:"row text-center py-4 gy-4 align-items-center border-bottom"},jt=t("li",{class:"col-7 text-end"},"小計",-1),Nt={class:"col-5 text-end"},Dt={class:"row text-center py-4 gy-4 align-items-center border-bottom"},qt=t("li",{class:"col-7 fw-bold fs-19 text-end"},"總金額",-1),At={class:"col-5 fw-bold fs-19 text-end"},Lt={class:"d-flex flex-row mt-5"},Pt=t("span",{class:"material-icons align-middle icon-right p-0"}," trending_flat ",-1);function Rt(e,a,Mt,Ht,m,i){const p=V("router-link");return l(),c("main",null,[t("section",null,[t("div",T,[t("div",U,[t("div",j,[t("div",N,[D,t("div",q,[A,e.carts.length>0?(l(),c("div",L,[(l(!0),c(d,null,r(e.carts,s=>(l(),c("ul",{class:"row text-center py-5 align-items-center border-bottom m-0",key:s.id},[t("li",P,n(s.product.title),1),t("li",R,[u(t("select",{class:"form-select rounded-0","onUpdate:modelValue":o=>s.qty=o,onChange:o=>e.updateCart(s),disabled:s.id===e.loadingItem},[(l(),c(d,null,r(20,o=>t("option",{value:o,key:`${o}12`},n(o),9,H)),64))],40,M),[[y,s.qty]])]),t("li",O,"$ "+n(i.toCurrency(s.product.price)),1),t("li",W,"$ "+n(i.toCurrency(s.total)),1),t("li",z,[t("button",{type:"button",class:"border-0 bg-white hover-text-primary",onClick:o=>e.deleteCartItem(s),disabled:s.id===e.loadingItem},Y,8,F)])]))),128))])):(l(),c("div",Z,J)),t("ul",K,[Q,t("li",tt,[t("div",et,[u(t("input",{type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠代碼","onUpdate:modelValue":a[0]||(a[0]=s=>m.code=s)},null,512),[[x,m.code]]),t("button",{type:"button",class:"input-group-text rounded-0",onClick:a[1]||(a[1]=(...s)=>i.getCoupon&&i.getCoupon(...s))},"套用")])])]),e.total-e.final_total?(l(),c("ul",st,[ot,t("li",lt,"- $"+n(i.toCurrency(e.total-e.final_total)),1)])):b("",!0),t("ul",nt,[ct,t("li",it,"$ "+n(i.toCurrency(e.total)),1)]),t("ul",at,[dt,t("li",rt,"$ "+n(i.toCurrency(e.final_total)),1)])]),t("div",_t,[e.carts.length>0?(l(),I(p,{key:0,to:"/from"},{default:g(()=>[ut]),_:1})):b("",!0)])]),t("div",ht,[mt,pt,e.carts.length>0?(l(),c("div",ft,[(l(!0),c(d,null,r(e.carts,s=>(l(),c("ul",{class:"row text-center py-4 gy-4 align-items-center border-bottom",key:s.id},[t("li",yt,n(s.product.title),1),t("li",bt,"$ "+n(i.toCurrency(s.product.price)),1),t("li",gt,[t("button",{type:"button",class:"border-0 bg-white",onClick:o=>e.deleteCartItem(s),disabled:s.id===e.loadingItem},wt,8,Ct)]),t("li",xt,[u(t("select",{class:"form-select rounded-0","onUpdate:modelValue":o=>s.qty=o,onChange:o=>e.updateCart(s),disabled:s.id===e.loadingItem},[(l(),c(d,null,r(10,o=>t("option",{value:o,key:`${o}12`},n(o),9,Vt)),64))],40,kt),[[y,s.qty]])]),t("li",It,[h("小計"),t("span",Et,"$ "+n(i.toCurrency(s.total)),1)])]))),128))])):(l(),c("div",$t,Bt)),Tt,t("ul",Ut,[jt,t("li",Nt,"$ "+n(i.toCurrency(e.total)),1)]),t("ul",Dt,[qt,t("li",At,"$ "+n(i.toCurrency(e.final_total)),1)]),t("div",Lt,[E(p,{to:"/from",class:"btn btn-primary rounded-0 py-2 position-relative w-100"},{default:g(()=>[h("結帳去 "),Pt]),_:1})])])])])])])])}const Xt=k(B,[["render",Rt]]);export{Xt as default};
