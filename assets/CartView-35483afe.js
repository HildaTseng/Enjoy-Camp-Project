import{m as w,d as v}from"./_commonjsHelpers-759366e4.js";import{S as h,c as y}from"./cart-75d078bd.js";import{v as b,a as g}from"./runtime-dom.esm-bundler-0d16a18e.js";import{_ as x,r as k,o as n,W as i,X as t,a0 as r,a5 as _,a6 as u,a3 as c,a4 as m,c as V,Z as C,Y as I,a1 as E,a2 as p}from"./_plugin-vue_export-helper-a32a19e0.js";const{VITE_URL:S,VITE_PATH:U}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"hilda88",BASE_URL:"/Enjoy-Camp-Project/",MODE:"production",DEV:!1,PROD:!0},B={data(){return{code:""}},computed:{...w(y,["carts","total","final_total","loadingItem"])},methods:{...v(y,["getCart","updateCart","deleteCartItem"]),toCurrency(e){return e==null?"":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getCoupon(){const e={code:this.code};this.$http.post(`${S}/v2/api/${U}/coupon`,{data:e}).then(a=>{h.fire({icon:"success",title:a.data.message,showConfirmButton:!1,timer:1500}),this.getCart()}).catch(a=>{h.fire({icon:"error",title:a.response.data.message,showConfirmButton:!1,timer:1500})})}},mounted(){this.getCart(),h.fire({title:"開幕慶優惠好禮",text:"優惠券輸入 【 NEW80 】即可獲得8折券"})}},T={class:"container my-md-10"},j={class:"row justify-content-center"},N={class:"col-xl-10"},D={class:"my-10 d-none d-md-block"},$=t("h2",{class:"fs-28 px-5 my-10 text-center"},"我的購物車",-1),q={class:"border border-g-40"},A=E('<ul class="row text-center fw-bold py-5 fs-19 bg-secondary m-0"><li class="col-5">品名</li><li class="col-2">數量</li><li class="col-2">單價</li><li class="col-2">小計</li><li class="col-1"></li></ul>',1),L={key:0},P={class:"col-5"},R={class:"col-2"},M=["onUpdate:modelValue","onChange","disabled"],H=["value"],O={class:"col-2 p-0"},W={class:"col-2"},z={class:"col-1"},F=["onClick","disabled"],X=t("i",{class:"fa-regular fa-trash-can fs-19"},null,-1),Y=[X],Z={key:1,class:"my-10"},G=t("p",{class:"text-center fs-7 fw-bold"},"購物車目前是空的。",-1),J=[G],K={class:"row text-end py-5 fs-19 bg-secondary align-items-center justify-content-between m-0"},Q=t("li",{class:"col-lg-7 col-8"},"優惠券",-1),tt={class:"col-4"},et={class:"input-group"},ot={key:2,class:"row text-center py-4 align-items-center border-bottom m-0"},st=t("li",{class:"col-9 text-end"},"優惠券折抵",-1),lt={class:"col-3 text-danger text-end"},nt={class:"row text-center py-4 align-items-center border-bottom m-0"},ct=t("li",{class:"col-9 text-end"},"小計",-1),it={class:"col-3 text-end"},at={class:"row text-center py-4 align-items-center border-bottom m-0"},dt=t("li",{class:"col-9 fw-bold fs-19 text-end"},"總金額",-1),rt={class:"col-3 fw-bold fs-19 text-end"},_t={class:"d-flex flex-row justify-content-end mt-5"},ut=t("button",{type:"button",class:"btn btn-primary rounded-0 px-12 py-2 position-relative hvr-icon-wobble-horizontal"},[p("結帳去 "),t("span",{class:"material-icons align-middle icon-right p-0 hvr-icon"}," trending_flat ")],-1),ht={class:"mt-5 mb-10 d-block d-md-none container"},mt=t("h2",{class:"fs-28 px-5 my-5 text-center"},"我的購物車",-1),pt=t("ul",{class:"row text-center py-5 fs-19 bg-secondary"},[t("li",{class:"col-7"},"品名"),t("li",{class:"col-3 text-end"},"單價")],-1),ft={key:0},yt={class:"col-7 p-0 text-start ps-3"},bt={class:"col-3 p-0 text-end"},gt={class:"col-2 p-0"},Ct=["onClick","disabled"],wt=t("i",{class:"fa-regular fa-trash-can fs-7 text-primary"},null,-1),vt=[wt],xt={class:"col-6"},kt=["onUpdate:modelValue","onChange","disabled"],Vt=["value"],It={class:"col-6 d-flex flex-row justify-content-around"},Et={class:"fw-bold"},St={key:1,class:"my-10"},Ut=t("p",{class:"text-center fs-7 fw-bold"},"購物車目前是空的。",-1),Bt=[Ut],Tt={class:"row text-center py-5 fs-19 bg-secondary align-items-center"},jt=t("li",{class:"col-3"},"優惠券",-1),Nt={class:"col-9"},Dt={class:"input-group"},$t={key:2,class:"row text-center py-4 gy-4 align-items-center border-bottom"},qt=t("li",{class:"col-7 text-end"},"優惠券折抵",-1),At={class:"col-5 text-danger text-end"},Lt={class:"row text-center py-4 gy-4 align-items-center border-bottom"},Pt=t("li",{class:"col-7 text-end"},"小計",-1),Rt={class:"col-5 text-end"},Mt={class:"row text-center py-4 gy-4 align-items-center border-bottom"},Ht=t("li",{class:"col-7 fw-bold fs-19 text-end"},"總金額",-1),Ot={class:"col-5 fw-bold fs-19 text-end"},Wt={class:"d-flex flex-row mt-5"},zt=t("span",{class:"material-icons align-middle icon-right p-0"}," trending_flat ",-1);function Ft(e,a,Xt,Yt,d,l){const f=k("router-link");return n(),i("main",null,[t("section",null,[t("div",T,[t("div",j,[t("div",N,[t("div",D,[$,t("div",q,[A,e.carts.length>0?(n(),i("div",L,[(n(!0),i(r,null,_(e.carts,o=>(n(),i("ul",{class:"row text-center py-5 align-items-center border-bottom m-0",key:o.id},[t("li",P,c(o.product.title),1),t("li",R,[u(t("select",{class:"form-select rounded-0","onUpdate:modelValue":s=>o.qty=s,onChange:s=>e.updateCart(o),disabled:o.id===e.loadingItem},[(n(),i(r,null,_(20,s=>t("option",{value:s,key:`${s}12`},c(s),9,H)),64))],40,M),[[g,o.qty]])]),t("li",O,"$ "+c(l.toCurrency(o.product.price)),1),t("li",W,"$ "+c(l.toCurrency(o.total)),1),t("li",z,[t("button",{type:"button",class:"border-0 bg-white hover-text-primary",onClick:s=>e.deleteCartItem(o),disabled:o.id===e.loadingItem},Y,8,F)])]))),128))])):(n(),i("div",Z,J)),t("ul",K,[Q,t("li",tt,[t("div",et,[u(t("input",{type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠代碼","onUpdate:modelValue":a[0]||(a[0]=o=>d.code=o)},null,512),[[b,d.code]]),t("button",{type:"button",class:"input-group-text rounded-0",onClick:a[1]||(a[1]=(...o)=>l.getCoupon&&l.getCoupon(...o))},"套用")])])]),e.total-e.final_total?(n(),i("ul",ot,[st,t("li",lt,"- $"+c(l.toCurrency(e.total-e.final_total)),1)])):m("",!0),t("ul",nt,[ct,t("li",it,"$ "+c(l.toCurrency(e.total)),1)]),t("ul",at,[dt,t("li",rt,"$ "+c(l.toCurrency(e.final_total)),1)])]),t("div",_t,[e.carts.length>0?(n(),V(f,{key:0,to:"/from"},{default:C(()=>[ut]),_:1})):m("",!0)])]),t("div",ht,[mt,pt,e.carts.length>0?(n(),i("div",ft,[(n(!0),i(r,null,_(e.carts,o=>(n(),i("ul",{class:"row text-center py-4 gy-4 align-items-center border-bottom",key:o.id},[t("li",yt,c(o.product.title),1),t("li",bt,"$ "+c(l.toCurrency(o.product.price)),1),t("li",gt,[t("button",{type:"button",class:"border-0 bg-white",onClick:s=>e.deleteCartItem(o),disabled:o.id===e.loadingItem},vt,8,Ct)]),t("li",xt,[u(t("select",{class:"form-select rounded-0","onUpdate:modelValue":s=>o.qty=s,onChange:s=>e.updateCart(o),disabled:o.id===e.loadingItem},[(n(),i(r,null,_(10,s=>t("option",{value:s,key:`${s}12`},c(s),9,Vt)),64))],40,kt),[[g,o.qty]])]),t("li",It,[p("小計"),t("span",Et,"$ "+c(l.toCurrency(o.total)),1)])]))),128))])):(n(),i("div",St,Bt)),t("ul",Tt,[jt,t("li",Nt,[t("div",Dt,[u(t("input",{type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠代碼","onUpdate:modelValue":a[2]||(a[2]=o=>d.code=o)},null,512),[[b,d.code]]),t("button",{type:"button",class:"input-group-text rounded-0",onClick:a[3]||(a[3]=(...o)=>l.getCoupon&&l.getCoupon(...o))},"套用")])])]),e.total-e.final_total?(n(),i("ul",$t,[qt,t("li",At,"- $"+c(l.toCurrency(e.total-e.final_total)),1)])):m("",!0),t("ul",Lt,[Pt,t("li",Rt,"$ "+c(l.toCurrency(e.total)),1)]),t("ul",Mt,[Ht,t("li",Ot,"$ "+c(l.toCurrency(e.final_total)),1)]),t("div",Wt,[I(f,{to:"/from",class:"btn btn-primary rounded-0 py-2 position-relative w-100"},{default:C(()=>[p("結帳去 "),zt]),_:1})])])])])])])])}const Qt=x(B,[["render",Ft]]);export{Qt as default};
