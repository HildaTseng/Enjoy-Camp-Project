import{b as m}from"./axios-a37252fb.js";import{c as g}from"./cart-6ba61c5d.js";import{v as y}from"./runtime-dom.esm-bundler-0d16a18e.js";import{_ as f,r as b,o as n,W as d,X as t,a3 as i,a6 as v,a2 as l,Y as u,Z as p,a0 as x,a5 as w}from"./_plugin-vue_export-helper-a32a19e0.js";const{VITE_URL:_,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"hilda88",BASE_URL:"/Enjoy-Camp-Project/",MODE:"production",DEV:!1,PROD:!0},C={data(){return{product:{},categoryProducts:[],qty:1}},watch:{"$route.params.id":{handler(r){this.id=r,this.id&&this.getProduct()}}},methods:{getProduct(){const{id:r}=this.$route.params;this.$http.get(`${_}/v2/api/${h}/product/${r}`).then(s=>{this.product=s.data.product,this.getCategoryProduct()}).catch(s=>{alert(s.response.data.message)})},toCurrency(r){return r==null?"":r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getCategoryProduct(){const{category:r}=this.product;this.$http.get(`${_}/v2/api/${h}/products?category=${r}`).then(s=>{this.categoryProducts=s.data.products,this.lengthFourArr()}).catch(s=>{alert(s.response.data.message)})},lengthFourArr(){this.categoryProducts.length>4&&(this.categoryProducts=this.categoryProducts.slice(0,4))},...m(g,["addToCart"]),addCount(){this.qty<10&&this.qty++},minusCount(){this.qty>1&&this.qty--}},mounted(){this.getProduct()}},P={class:"container my-12"},k={class:"row justify-content-around"},T={class:"col-lg-6"},V=["src","alt"],j={class:"col-lg-5 d-flex flex-column justify-content-between mt-10 mt-lg-0"},q={class:"mb-6 mb-xl-0"},E={class:"fw-bold mb-5"},A={class:""},U={class:"d-flex flex-xl-row justify-content-between align-items-xl-end flex-column align-items-start"},B={class:"d-flex flex-row align-items-center w-75"},D=t("p",{class:"me-5 fs-19"},"數量",-1),I={class:"d-flex flex-row align-items-center border border-secondary border-3 w-75"},L=t("span",{class:"material-icons align-middle"},"add",-1),R=[L],S=t("span",{class:"material-icons align-middle"},"remove",-1),F=[S],N={key:0,class:"mt-3 mt-xl-0"},H={class:"fs-28-rwd-19 fw-bold"},M={key:1,class:"mt-3 mt-xl-0"},O={class:"text-xl-end"},W={class:"text-decoration-line-through"},X={class:"fs-28-rwd-19 fw-bold"},Y={class:"row justify-content-end mt-xl-10 mt-5"},Z={class:"col-xl-5 mb-3 mb-xl-0"},z=t("span",{class:"material-icons align-middle me-5"},"shopping_cart",-1),G={class:"col-xl-5"},J=t("span",{class:"material-icons align-middle me-5"},"shopping_bag",-1),K={class:"container my-12"},Q=t("h3",{class:"border-bottom pb-3 border-2"},"你可能也會喜歡",-1),$={class:"row row-cols-lg-4 row-cols-md-2 row-cols-1 pt-md-12 pt-11 pb-10"},tt={class:"card rounded-0"},st={class:"position-relative"},ot=["src","alt"],et={class:"btn-hover-add-cart d-flex justify-content-center align-items-center"},rt={class:"card-body p-0 py-5 text-center border"},ct={class:"card-title fs-16 fw-bold"},it={class:"card-text"};function nt(r,s,dt,lt,o,c){const a=b("router-link");return n(),d("main",null,[t("section",null,[t("div",P,[t("div",k,[t("div",T,[t("img",{class:"img-fluid",src:o.product.imageUrl,alt:o.product.title,style:{"aspect-ratio":"1/0.8","object-fit":"cover"}},null,8,V)]),t("div",j,[t("div",q,[t("h3",E,i(o.product.title),1),t("p",null,i(o.product.description),1)]),t("div",A,[t("div",U,[t("div",B,[D,t("div",I,[t("button",{type:"button",class:"border-0 bg-white px-5 py-2",onClick:s[0]||(s[0]=(...e)=>c.minusCount&&c.minusCount(...e))},R),v(t("input",{class:"form-control border-0 text-center fs-28-rwd-19",type:"text",readonly:"","onUpdate:modelValue":s[1]||(s[1]=e=>o.qty=e)},null,512),[[y,o.qty]]),t("button",{type:"button",class:"border-0 bg-white px-5 py-2",onClick:s[2]||(s[2]=(...e)=>c.addCount&&c.addCount(...e))},F)])]),o.product.price===o.product.origin_price?(n(),d("div",N,[t("p",H,"$ "+i(c.toCurrency(o.product.price)),1)])):(n(),d("div",M,[t("p",O,[l("定價"),t("span",W," $ "+i(c.toCurrency(o.product.origin_price)),1)]),t("p",X,"$ "+i(c.toCurrency(o.product.price)),1)]))]),t("div",Y,[t("div",Z,[t("button",{type:"button",class:"btn btn-outline-primary rounded-0 w-100 py-2",onClick:s[3]||(s[3]=e=>r.addToCart(o.product.id,o.qty))},[z,l("加入購物車")])]),t("div",G,[u(a,{to:"/cart"},{default:p(()=>[t("button",{type:"button",class:"btn btn-primary rounded-0 w-100 py-2",onClick:s[4]||(s[4]=e=>r.addToCart(o.product.id,o.qty))},[J,l("立即購買")])]),_:1})])])])])])])]),t("section",null,[t("div",K,[Q,t("div",$,[(n(!0),d(x,null,w(o.categoryProducts,e=>(n(),d("div",{class:"col gy-4 gy-lg-0",key:e.id},[t("div",tt,[u(a,{to:`/product/${e.id}`},{default:p(()=>[t("div",st,[t("img",{class:"img-fluid",src:e.imageUrl,alt:e.title,style:{"aspect-ratio":"1/1.1","object-fit":"cover"}},null,8,ot),t("div",et,[t("button",{type:"button",class:"add-cart-btn",onClick:s[5]||(s[5]=at=>r.addToCart(o.product.id))},"加入購物車")])]),t("div",rt,[t("h4",ct,i(e.title),1),t("p",it,"$ "+i(c.toCurrency(e.price)),1)])]),_:2},1032,["to"])])]))),128))])])])])}const mt=f(C,[["render",nt]]);export{mt as default};
